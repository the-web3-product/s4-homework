### Layer2 组件交互图（Optimistic 通用）

```
                 用户钱包 / 应用
                        |
                        v   (提交 L2 交易)
                  [ Sequencer 排序器 ]
                        |
                        |  执行交易、给“秒级软确认”
                        v
             [ L2 执行层 (op-geth/EVM) ]
                        |
                        |  产出 L2 区块/状态根
                        v
                  (链上/链下产物)
                        |
                        v
[ Batcher 批处理 ] -----------------------> [ L1/DA 层 ]
   |             压缩批次、提交数据            |  以太坊 calldata 或外部 DA
   |                                          |
   v                                          |
[ Proposer 状态提交 ] ---------------------> [ L1 合约 ]
   |              提交输出根/承诺              |  OptimismPortal / SystemConfig / 输出根合约
   |                                          |
   |                                          ^
   |                                       [ Challenger 质疑者 ]
   |                                          |  触发欺诈证明/争议游戏
   |                                          |
   |                                   最终性：挑战期后确认
   |
   |  跨层资产与消息
   v
[ Bridge/Messenger 桥与信使 ]
   |\
   | \  L1 → L2 存款：在 L1 Portal 锁定资产/发消息 ———> L2 接收并入账
   |  \
   |   \ L2 → L1 提现：L2 销毁/锁定 — 生成证明 ———> L1 等挑战期 Finalize 释放
   |
   +—— L2 ↔ L2：经 L1 中继或生态内标准桥转消息/资产，分别在各自 L2 入块
```

---

### Layer2 组件交互图（ZK Rollup 通用）

```
                 用户钱包 / 应用
                        |
                        v   (提交 L2 交易)
                  [ Sequencer 排序器 ]
                        |
                        |  执行交易、给“秒级软确认”
                        v
             [ L2 执行层 (EVM) / 区块与状态根 ]
                        |
                        |  生成证明所需的执行痕迹/承诺
                        v
                [ Prover 证明生成器 ]
                        |
                        |  生成 ZK 证明（SNARK/STARK）
                        v
[ Batcher 批处理 ] -----------------------> [ L1/DA 层 ]
   |             压缩批次、提交数据            |  以太坊 calldata 或外部 DA
   |                                          |
   v                                          |
[ Proposer 提交 ] -------------------------> [ L1 验证合约 ]
   |            提交 状态根 + ZK 证明           |  Verifier 验证通过=最终确认
   |                                          |
   |                              （无挑战期，验证即最终）
   |
   |  跨层资产与消息
   v
[ Bridge/Messenger 桥与信使 ]
   |\
   | \  L1 → L2：Portal 锁定 + 消息 ——> L2 铸造/记账
   |  \
   |   \ L2 → L1：L2 销毁/锁定 ——> 随证明/状态提交 ——> L1 验证后释放
   |
   +—— L2 ↔ L2：经 L1 中继或生态桥转消息/资产，各自入块
```


